function bbparse(e){var a=/([^\\]|^)(\\\\)*(\[[^\]]+)/g,i=document,l=e=>i.createElement(e);e+="[/]";var s="b,i,s,u,img,code,pre,ul,ol,li".split(","),r=l("div");r.style.whiteSpace="pre-wrap";for(var t,c=[r],n=a.lastIndex=0;t=a.exec(e);){var p=t[3],f=a.lastIndex,o=e.slice(n,f-p.length);if(o.length)switch((r.tagName||"").toLowerCase()){case"img":r.src=o;break;case"a":r.href=r.href||o;default:r.appendChild(i.createTextNode(o))}if("/"==p[1]){var d=c.pop();if(r==d)return r;d.appendChild(r),r=d}else{if("*"==(p=p.slice(1).split("="))){var h=e.indexOf("\n",f);e=e.slice(0,h)+"[/]"+e.slice(h),p[0]="li"}"list"==p&&(p[0]="ul"),c.push(r);var u=p[1];if(p=p[0],s.indexOf(p)+1)r=l(p);else switch(p){case"url":r=l("a"),u&&(r.href=u);break;case"color":(r=l("span")).style.color=u;break;case"size":(r=l("span")).style.fontSize=u+"px"}}n=f+1}}