function bbparse(e){var i,l=/([^\\]|^)(\\\\)*(\[[^\]]+)/g,a=document,s=e=>a.createElement(e),t="b,i,s,u,img,code,pre,ul,ol,li".split(","),r=s("div"),n=[r],c=l.lastIndex=0;for(e+="[/]",r.style.whiteSpace="pre-wrap";i=l.exec(e);){var p=i[3],d=l.lastIndex,f=e.slice(c,d-p.length);if(f.length)switch((r.tagName||"").toLowerCase()){case"img":r.src=f;break;case"a":r.href=r.href||f;default:r.appendChild(a.createTextNode(f))}if("/"==p[1]){var o=n.pop();if(r==o)return r;o.appendChild(r),r=o}else{if("*"==(p=p.slice(1).split("="))){var h=e.indexOf("\n",d);e=e.slice(0,h)+"[/]"+e.slice(h),p[0]="li"}"list"==p&&(p[0]="ul"),n.push(r);var u=p[1];p=p[0],t.indexOf(p)+1?r=s(p):"url"==p?(r=s("a"),u&&(r.href=u)):"color"==p?(r=s("span")).style[p]=u:"size"==p&&((r=s("span")).style.fontSize=u+"px")}c=d+1}}