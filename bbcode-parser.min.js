function bbparse(e){var i,l=/([^\\]|^)(\\\\)*(\[[^\]]+)/g,a=document,s=e=>a.createElement(e),t="b,i,s,u,img,code,pre,ul,ol,li".split(","),r=s("div"),n=[r],c=l.lastIndex=0;for(e+="[/]",r.style.whiteSpace="pre-wrap";i=l.exec(e);){var p=i[3],d=l.lastIndex,f=e.slice(c,d-p.length);if(f.length)switch((r.tagName||"").toLowerCase()){case"img":r.src=f;break;case"a":r.href=r.href||f;default:r.appendChild(a.createTextNode(f))}if("/"==p[1]){var o=n.pop();if(r==o)return r;o.appendChild(r),r=o}else{var h=(p=p.slice(1).split("="))[1];if("*"==(p=p[0])){var u=e.indexOf("\n",d);e=e.slice(0,u)+"[/]"+e.slice(u),p="li"}"list"==p&&(p="ul"),n.push(r),t.indexOf(p)+1?r=s(p):"url"==p?(r=s("a"),h&&(r.href=h)):"color"==p?(r=s("span")).style[p]=h:"size"==p&&((r=s("span")).style.fontSize=h+"px")}c=d+1}}